<section class="page-card" aria-labelledby="recover-heading">
  <h1 id="recover-heading" class="page-card__title">Recover Your UMN Password</h1>
  <p class="page-card__intro">
    Enter your Internet ID or the alternate email address on file. We’ll use it to locate your account and send
    password recovery instructions.
  </p>

  <div *ngIf="successMessage() as message"
       #successBannerRef
       class="banner banner--success"
       role="status"
       aria-live="polite"
       tabindex="-1">
    {{ message }}
  </div>

  <div *ngIf="shouldShowErrorSummary()"
       #errorSummaryRef
       id="recover-error-summary"
       class="banner banner--error"
       role="alert"
       aria-live="assertive"
       tabindex="-1">
    <h2 class="banner__title">There’s a problem</h2>
    <ul *ngIf="validationMessages().length" class="banner__list">
      <li *ngFor="let item of validationMessages()">
        <a class="banner__link"
           [href]="'#' + item.fieldId"
           (click)="focusField(item.fieldId); $event.preventDefault()">
          {{ item.message }}
        </a>
      </li>
    </ul>
    <p *ngIf="apiError()" class="banner__message">{{ apiError() }}</p>
  </div>

  <form [formGroup]="form" (ngSubmit)="submit()" class="page-card__form" novalidate>
    <div class="form-field">
      <label class="form-field__label" for="identifier">Internet ID or Alternate Email Address</label>
      <input
        id="identifier"
        type="text"
        formControlName="identifier"
        class="form-field__control"
        autocomplete="off"
        [class.form-field__control--invalid]="hasError()"
        [attr.aria-invalid]="hasError() ? 'true' : null"
        [attr.aria-describedby]="hasError() ? 'identifier-error identifier-help' : 'identifier-help'"
      />
      <p id="identifier-help" class="form-field__message">
        • Enter your Internet ID, then answer your password reset questions.<br>
        • Or enter the alternate email address on your account.
      </p>
      <p *ngIf="getError() as message"
         id="identifier-error"
         class="form-field__message form-field__message--error"
         aria-live="polite">
        {{ message }}
      </p>
    </div>

    <div class="form-actions">
      <button type="submit" class="submit-button" [disabled]="isSubmitting()">
        {{ isSubmitting() ? 'Submitting…' : 'Submit' }}
      </button>
    </div>
  </form>
</section>

<ng-template #rail>
  <aside class="rail-card" aria-labelledby="recover-rail-heading">
    <div class="rail-card__header">
      <h2 id="recover-rail-heading" class="rail-card__title">About password recovery</h2>
    </div>
    <div class="rail-card__body">
      <p>
        We’ll email instructions to the alternate address on the account. If you haven’t set up password reset
        questions or can’t access your alternate email, contact Technology Help at
        <a class="rail-card__link" href="tel:6123014357">612-301-4357</a> (1-HELP).
      </p>
    </div>
  </aside>
</ng-template>
