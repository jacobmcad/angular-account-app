<section class="page-card" aria-labelledby="recover-id-heading">
  <h1 id="recover-id-heading" class="page-card__title">Recover Internet ID</h1>
  <p class="page-card__intro">
    Provide the alternate email address on file for your account. We will email your Internet ID to that address.
  </p>

  <div *ngIf="successMessage() as message"
       #successBannerRef
       class="banner banner--success"
       role="status"
       aria-live="polite"
       tabindex="-1">
    {{ message }}
  </div>

  <div *ngIf="shouldShowErrorSummary()"
       #errorSummaryRef
       id="recover-id-error-summary"
       class="banner banner--error"
       role="alert"
       aria-live="assertive"
       tabindex="-1">
    <h2 class="banner__title">There’s a problem</h2>
    <ul *ngIf="validationMessages().length" class="banner__list">
      <li *ngFor="let item of validationMessages()">
        <a class="banner__link"
           [href]="'#' + item.fieldId"
           (click)="focusField(item.fieldId); $event.preventDefault()">
          {{ item.message }}
        </a>
      </li>
    </ul>
    <p *ngIf="apiError()" class="banner__message">{{ apiError() }}</p>
  </div>

  <form [formGroup]="form" (ngSubmit)="submit()" class="page-card__form" novalidate>
    <div class="form-field">
      <label class="form-field__label" for="alternateEmail">Alternate Email Address</label>
      <input
        id="alternateEmail"
        type="email"
        formControlName="alternateEmail"
        class="form-field__control"
        autocomplete="email"
        [class.form-field__control--invalid]="hasError()"
        [attr.aria-invalid]="hasError() ? 'true' : null"
        [attr.aria-describedby]="hasError() ? 'alternateEmail-error alternateEmail-help' : 'alternateEmail-help'"
      />
      <p id="alternateEmail-help" class="form-field__message">
        We’ll send your Internet ID to this address. It must match the alternate email saved on your account.
      </p>
      <p *ngIf="getError() as message"
         id="alternateEmail-error"
         class="form-field__message form-field__message--error"
         aria-live="polite">
        {{ message }}
      </p>
    </div>

    <div class="form-actions">
      <button type="submit" class="submit-button" [disabled]="isSubmitting()">
        {{ isSubmitting() ? 'Submitting…' : 'Submit' }}
      </button>
    </div>
  </form>
</section>

<ng-template #rail>
  <aside class="rail-card" aria-labelledby="recover-id-rail-heading">
    <div class="rail-card__header">
      <h2 id="recover-id-rail-heading" class="rail-card__title">About Internet ID recovery</h2>
    </div>
    <div class="rail-card__body">
      <p>
        The email you enter must match the alternate address stored in your account. If you can’t access that email or
        aren’t sure which one is on file, contact Technology Help at
        <a class="rail-card__link" href="tel:6123014357">612-301-4357</a> (1-HELP).
      </p>
    </div>
  </aside>
</ng-template>
